<div class="dialog-top" mat-dialog-title>
  <span class="title">View and edit your profile </span>
  <mat-icon class="close-icon" mat-button mat-dialog-close>close</mat-icon>
</div>

<div class="dialog-container" mat-dialog-content>

  <div class="dialog-main table-grid">

    <div *ngIf="currentUser?.photoURL"><img src="{{currentUser?.photoURL}}" class="profile-image">
      <input hidden type="file" #selectFile (change)="onFileSelected($event)" />
      <span *ngIf="!isGuestUserActive" class="material-symbols-sharp" (click)="selectFile.click()">edit</span>
    </div>

    <div *ngIf="!currentUser?.photoURL"><img src="assets/img/user/profile-picture.png" class="profile-image">
      <input hidden type="file" #selectFile (change)="onFileSelected($event)" />
      <span *ngIf="!isGuestUserActive" class="material-symbols-sharp" (click)="selectFile.click()">edit</span>
    </div>

    <div>
      <span class="field-name">Display Name:</span>
      <div *ngIf="!isEditing.displayName">
        <span><b>{{currentUser?.displayName}}</b></span>
        <span *ngIf="!isGuestUserActive" (click)="startEdit('displayName')" class="material-symbols-sharp">edit</span>
      </div>
      <div *ngIf="isEditing.displayName">
        <input (keyup.enter)="updateUserProperty('displayName', displayName.value)" class="field-value-form" type="text"
          #displayName value="{{currentUser?.displayName}}">
        <span (click)="updateUserProperty('displayName', displayName.value)" class="material-symbols-sharp">done</span>
        <span (click)="cancelEdit('displayName')" class="material-symbols-sharp">close</span>

      </div>
    </div>


    <div>
      <span class="field-name">Firstname:</span>
      <div class="field-value" *ngIf="!isEditing.firstName">
        <span><br><b>{{currentUser?.firstName}}</b></span>
        <span *ngIf="!isGuestUserActive" (click)="startEdit('firstName')" class="material-symbols-sharp">edit</span>
      </div>

      <div *ngIf="isEditing.firstName">
        <input (keyup.enter)="updateUserProperty('firstName', firstname.value)" class="field-value-form" type="text"
          #firstname value="{{currentUser?.firstName}}">
        <span (click)="updateUserProperty('firstName', firstname.value)" class="material-symbols-sharp">done</span>
        <span (click)="cancelEdit('firstName')" class="material-symbols-sharp">close</span>
      </div>
    </div>


    <div>
      <span class="field-name">Lastname:</span>
      <div class="field-value" *ngIf="!isEditing.lastName">
        <span><br><b>{{currentUser?.lastName}}</b></span>
        <span *ngIf="!isGuestUserActive" (click)="startEdit('lastName')" class="material-symbols-sharp">edit</span>

      </div>
      <div *ngIf="isEditing.lastName">
        <input (keyup.enter)="updateUserProperty('lastName', lastName.value)" class="field-value-form" type="text"
          #lastName value="{{currentUser?.lastName}}">
        <span (click)="updateUserProperty('lastName', lastName.value)" class="material-symbols-sharp">done</span>
        <span (click)="cancelEdit('lastName')" class="material-symbols-sharp">close</span>

      </div>
    </div>


    <div>
      <span class="field-name">Email:</span>
      <div class="field-value" *ngIf="!isEditing.email">
        <span> <br><b>{{currentUser?.email}}</b></span>
        <span *ngIf="!isGuestUserActive" (click)="startEdit('email')" class="material-symbols-sharp">edit</span>

      </div>
      <div *ngIf="isEditing.email">
        <input (keyup.enter)="updateUserProperty('email', email.value)" class="field-value-form" type="text" #email
          value="{{currentUser?.email}}">
        <span (click)="updateUserProperty('email', email.value)" class="material-symbols-sharp">done</span>
        <span (click)="cancelEdit('email')" class="material-symbols-sharp">close</span>

      </div>
    </div>


    <div>
      <div *ngIf="data.emailVerified === true"><span class="field-name">Email verified:</span><br><b>Yes</b>
      </div>
      <div *ngIf="data.emailVerified === false"><span class="field-name">Email verified:</span><br>
        <b>No</b>
      </div>
    </div>


    <div>
      <span class="field-name">City:</span>
      <div class="field-value" *ngIf="!isEditing.city">
        <br><b>{{currentUser?.city}}</b>
        <span *ngIf="!isGuestUserActive" (click)="startEdit('city')" class="material-symbols-sharp">edit</span>

      </div>
      <div *ngIf="isEditing.city">
        <input (keyup.enter)="updateUserProperty('email', city.value)" class="field-value-form" type="text" #city
          value="{{currentUser?.city}}">
        <span (click)="updateUserProperty('city', city.value)" class="material-symbols-sharp">done</span>
        <span (click)="cancelEdit('city')" class="material-symbols-sharp">close</span>

      </div>
    </div>


    <div>
      <span class="field-name">Street:</span>
      <div>
        <div class="field-value" *ngIf="!isEditing.street">
          <br><b>{{currentUser?.street}}</b>
          <span *ngIf="!isGuestUserActive" (click)="startEdit('street')" class="material-symbols-sharp">edit</span>

        </div>
      </div>
      <div>
        <div *ngIf="isEditing.street">
          <input (keyup.enter)="updateUserProperty('street', street.value)" class="field-value-form" type="text" #street
            value="{{currentUser?.street}}">
          <span (click)="updateUserProperty('street', street.value)" class="material-symbols-sharp">done</span>
          <span (click)="cancelEdit('street')" class="material-symbols-sharp">close</span>

        </div>
      </div>
    </div>



    <div>
      <span class="field-name">Zip-Code:</span>
      <div>
        <div class="field-value" *ngIf="!isEditing.zipCode">
          <br><b>{{currentUser?.zipCode}}</b>
          <span *ngIf="!isGuestUserActive" (click)="startEdit('zipCode')" class="material-symbols-sharp">edit</span>

        </div>
      </div>
      <div>
        <div *ngIf="isEditing.zipCode">
          <input (keyup.enter)="updateUserProperty('zipCode', zipCode.value)" class="field-value-form" type="text"
            #zipCode value="{{currentUser?.zipCode}}">
          <span (click)="updateUserProperty('zipCode', zipCode.value)" class="material-symbols-sharp">done</span>
          <span (click)="cancelEdit('zipCode')" class="material-symbols-sharp">close</span>

        </div>
      </div>
    </div>



    <div>
      <span class="field-name">Birthdate:</span>
      <div>
        <div class="field-value" *ngIf="!isEditing.birthDate">
          <br><b>{{currentUser?.birthDate}}</b>
          <span *ngIf="!isGuestUserActive" (click)="startEdit('birthDate')" class="material-symbols-sharp">edit</span>

        </div>
      </div>
      <div>
        <div *ngIf="isEditing.birthDate">
          <input (keyup.enter)="updateUserProperty('birthDate', birthDate.value)" class="field-value-form" type="text"
            #birthDate value="{{currentUser?.birthDate}}">
          <span (click)="updateUserProperty('birthDate', birthDate.value)" class="material-symbols-sharp">done</span>
          <span (click)="cancelEdit('birthDate')" class="material-symbols-sharp">close</span>

        </div>
      </div>
    </div>

  </div>